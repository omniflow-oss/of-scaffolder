package {{rootPackage}}.shared.infrastructure.http;

import {{rootPackage}}.shared.contract.result.Failure;
import {{rootPackage}}.shared.contract.result.Result;
import {{rootPackage}}.shared.contract.result.Success;
import jakarta.ws.rs.core.Response;

public final class ResultHttpRenderer {
  private ResultHttpRenderer() {}

  public static <T> Response toResponse(Result<T> result) {
    if (result instanceof Success<T> ok) {
      return Response.ok(ok.value()).build();
    }
    if (result instanceof Failure<T> ko) {
      return Response.status(Response.Status.BAD_REQUEST).entity(ko.error()).build();
    }
    return Response.status(Response.Status.INTERNAL_SERVER_ERROR).build();
  }
}

